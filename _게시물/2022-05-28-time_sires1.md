---
title : "시계열 분석 개념 정리 및 시각화"
excerpt : "Phython을 활용한 시계열 분석 및 시각화"

categories :
 - Phython

 tags:
 - [Phython, 금융권, 시각화, time sires,  정상 시계열, 비정상 시계열, 시계열 데이터]

---

Phython으로 알아보는 시계열 분석  
(시계열 데이터, 정상 시계열, 시계열 분해법)  
========================

오늘은 금융권에서 자주 사용하는 '시계열 분석'의 개념 정립 시간입니다!  
이번 포스팅에서는 시계열 분석의 토대가 되는 용어들을 차근차근 살펴보겠습니다.

<br/>

시계열 데이터는 가입자 생애주기(보험사), 경기변동/환율/주식(증권사), 신용등급 평가모형(은행) 등 다양한 목적으로 사용됩니다. 시계열 분석은 무엇이고, 어떤 데이터를 사용하는 걸까요?

<br/>

## 시계열 분석이란?
과거 데이터 패턴을 토대로 미래의 값을 예측하는 방법.  
과거의 패턴이 미래에도 지속된다는 데이터의 안정성(=정상성)이 전제되어야 한다.  

<br/>

시계열 분석에 사용하는 데이터를 '시계열 데이터'라고 합니다.  
시계열 데이터는 정확히 무엇이고, 어떠한 형태를 나타내는지 그림으로 살펴보겠습니다!  

<br/>

## 시계열 데이터란?
> 시간의 흐름에 따라 관측한 값들의 집합.  

> 예측 모델에서 '시간'을 변수로 사용하는 것이 특징  

<img src ="https://img1.daumcdn.net/thumb/R1280x0.fpng/?fname=http://t1.daumcdn.net/brunch/service/user/e0Ty/image/yvFVjikWvSc1d-2PnXMQZn3LhSw.png">

<시계열 데이터 - 비정상 시계열>

<br/>

시계열 데이터는 여러 변동요인의 결합으로 이뤄집니다. 이러한 변동요인을 잘 구분하거나, 미래 값을 예측하기 위해 '시계열 분해법'을 사용합니다. 미래 값 예측은 시계열 데이터를 개별 요소(추세, 계절, 순환, 불규칙)로 분해하고 재결합한 후에 진행합니다.   

-> 예측의 정확도를 높이기 위해 시계열 분해법을 사용하여 각 요소를 분해하고,   
시각화를 통해 요소 별 insight를 확인하면 재결합하여 미래 값 예측을 진행하는 것  

<br/>

## 시계열 분해법(Time Series Decomposition)이란?  
시계열 데이터를 추세/순환/계절/불규칙 요소로 분해하는 기법  

<br/>

### 추세(Trend)  
데이터가 "장기적으로 증가/감소하는 것"을 의미하며 꼭 선형적일 필요는 없음  

<br/>

### 순환(Cycle)  
일정한 주기 없이 "장기적인 변화 반복 현상"을 의미  
ex) 경기변동  

<br/>

### 계절성(Seasonal)  
주, 월, 분기, 반기 등 "특정 시간의 주기로 나타나는 패턴"  

<br/>

### 불규칙 요소(Random, Residual)  
설명 및 예측 불가능한 임의의 변동을 의미  
Raw data에서 추세, 순환, 계절성을 뺀 것을 불규칙 요소라고 함  

<img src= "https://img1.daumcdn.net/thumb/R1280x0.fpng/?fname=http://t1.daumcdn.net/brunch/service/user/e0Ty/image/fEadhSfpS-l6W6nkA7IE8KocTqk.png">

<br/>

<시계열 분해법(1)>

시계열분해법(1)은 시계열 데이터를 4가지 요소(추세/순환/계절/불규칙)로 분해한 것을 4개의 다른 차트에 표현한 것이고, 시계열분해법(2)는 분해한 4가지 요소를 하나의 차트에 표현한 것입니다.  

<img src= "https://img1.daumcdn.net/thumb/R1280x0.fpng/?fname=http://t1.daumcdn.net/brunch/service/user/e0Ty/image/r5Z0SesTbYe0C3dQHaBj1vUsh5k.png">

<br/>

<시계열 분해법(2)>  

시계열 데이터는 시간의 흐름에 따른 관찰값이라고 정의했습니다. 시간의 흐름에 따라 일정한 경향을 보이는 시계열 데이터를 '정상 시계열'이라고 부릅니다. 여기서 말하는 '정상성'이란 무엇이고, 정상 시계열을 정의하는 이유는 무엇일까요?  

<br/>

### 정상성(Stationary)  
시간의 흐름에 따라 '평균과 분산'이 일정한 성질을 의미합니다.   
ex) 추세나 계절성이 있는 시계열은 정상 시계열이 아닙니다.  

정상성을 나타내지 않는 시계열 데이터는 모델링에 복잡한 패턴이 필요하고 분석하기가 어렵습니다.  
  
따라서 차분, 로그 변환 등의 전처리를 통해 정상 시계열로 변환한 후 분석을 진행합니다.  

<img src="https://img1.daumcdn.net/thumb/R1280x0.fpng/?fname=http://t1.daumcdn.net/brunch/service/user/e0Ty/image/KUfbr70KdogDDlxh9v2-lNT-akU.png">  

(a) 비정상 시계열 -> 시간의 흐름에 따라 분산과 평균이 일정하지 않음  

(b) 비정상 시계열 -> 시간의 흐름에 따라 분산은 일정하나, 평균이 일정하지 않음  

(c) 비정상 시계열 -> 시간의 흐름에 따라 평균은 일정하나, 분산이 일정하지 않음  

(d) 정상 시계열 -> 시간의 흐름에 따라 분산과 평균이 일정함  


### 정상 시계열 변환  
1) 로그 변환 (log(Yt))  
-> 변동 폭이 일정하지 않은 경우  

2) 차분(Differencing, Yt-Yt-1)  
-> 추세 및 계절성이 존재하지 않는 경우 정상성을 보일 때까지 차분을 반복합니다.  

3) 로그 변환 후 차분 (Δlog Yt - Δlog Yt-1)  
-> 단순 차분값이 아닌 변동률로 변환하기 위해 사용  

Part(2)에서는 정상성이 가정된 이후 사용하는 ARIMA 모형에 대해 다루겠습니다 :)  

이해 안 가는 부분 및 틀린 부분 있으면 댓글로 남겨주세요!   