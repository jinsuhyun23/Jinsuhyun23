---
title : "SQL 공부2 (Transaction)"
excerpt : "SQL"

categories :
 - 프로그래밍 공부

 tags:
 - [증권사, KB, C언어, 프로그래밍, 코딩,
 개발자, IT, 디지털
 인턴, 전환형, 채용형 인턴]
---

SQL 공부2 (Transaction이란?)
===========================================

## Transaction(트렌젝션)  
> 데이터베이스의 상태를 변화시키는 하나의 '최소 작업 단위'    

<br/>

### 1) 트렌젝션의 특징  
> 트렌젝션은 DB 시스템에서 '병행 제어' 및 '회복 작업'시 처리되는 작업의 '논리적 단위'이다   

> 사용자가 시스템에 대한 서비스 요구 시 시스템이 응답하기 위한 상태 변환 과정의 '작업 단위'이다   

> 하나의 트렌젝션은 Commit되거나 Rollback된다. 

<br/>

### 2) 트랜젝션의 성질 - ACID(원자성, 일관성, 고립성, 지속성)
#### 1. 원자성(Atomicity)     
- 트랜잭션의 연산은 DB에 모두 반영되든지 or 전혀 반영되지 않아야 한다       
ex) (A 계좌 - 100 , B 계좌 + 100) or (A 계좌 0 , B 계좌 0)   
 
- 트랜잭션 내의 모든 명령은 완벽히 수행되어야 하며, 하나라도 오류가 발생할 경우 트랜젝션 전부가 취소되어야 한다     
ex) (A 계좌 - 100 , B 계좌 + 100) -> 커밋 / (A 계좌 - 100 , B 계좌 0) -> 롤백    

#### 2. 일관성(Consistency)   
- 트랜잭션이 그 실행을 성공적으로 완료하면, 언제나 일관성 있는 DB 상태로 변환   

- 시스템의 고정 요소는 트랜잭션 '수행 전'과 '수행 후'가 같아야 한다   

#### 3. 고립성(Isolation)     
- 하나의 트랜잭션이 실행 중에는 다른 트랜잭션의 연산이 끼어들 수 없다  
ex) (A 계좌 - 100 , B 계좌 + 100) COMMIT 이전까지 A, B 계좌 LOCK  

- 수행중인 트랜잭션이 완료될 때까지 다른 트랜잭션에서 수행 결과를 참조할 수 없다   

#### 4. 지속성(Durability)   
- 성공적으로 완료된 트랜잭션의 결과는 '영구적으로' 보장되어야 한다  
ex) (A 계좌 - 100 , B 계좌 + 100) COMMIT 이후 갑자기 변동이 발생하면 안 됨  

<br/>

### 3) 트랜잭션 통제 언어 - TCL(Transaction Control Language)   
#### 1. 커밋(COMMIT) 연산  
- 한 개의 논리적 단위(트랜잭션)에 대한 변경사항을 한 꺼번에 DB에 반영하는 연산  

#### 2. 롤백(ROLLBACK) 연산   
- 트랜잭션의 원자성을 구현하기 위해 이 트랜잭션이 행한 모든 연산을 취소(Undo)하는 연산  
- 롤백시에는 해당 트랜잭션을 재시작하거나 폐기   

#### 3. SAVEPOINT 연산  
- 모든 연산을 취소하는 것이 아닌 '특정한 지점'까지만 되돌리고 싶을 때 사용하는 연산  

<img src = "https://k.kakaocdn.net/dn/PDxus/btqB2uxivzk/ERRntkdAzfbibpUlXmtohK/img.png">

* 활성(Active)  
-> 트랜젝션이 '정상적으로 실행' 중인 상태    

* 실패(Failed)  
-> 트랜젝션 실행에 오류가 발생하여 '중단된 상태'   

* 철회(Aborted)  
-> 트랜젝션이 비정상적으로 종료되어 ROLLBACK 연산을 수행한 상태  

* 부분 완료(Partially Committed)   
-> 트랜잭션의 마지막 연산까지 실행하고, COMMIT 연산 실행 직전의 상태  

* 완료(Commited)  
-> 트랜잭션이 성공적으로 종료되어, COMMIT 연산을 실행한 상태  



<br/>

### 출처 : https://devuna.tistory.com/30, https://coding-factory.tistory.com/226  
